When making changes to this codebase, please ensure that they align with the detailed specifications outlined in the design document located at [docs/design_doc.md](docs/design_doc.md).

This document covers:
- Terminology and definitions (e.g., Atomic Skill)
- Filesystem layout and data structures
- Course asset formats (JSON, YAML, Markdown)
- Save data schemas
- Scheduling logic (FSRS-5)
- UI component considerations (though not fully detailed)
- Error handling procedures
- Technology stack and build pipeline

Adherence to these specifications is crucial for maintaining the integrity, consistency, and quality of the project.

After changes are made, tests can be run with `npm test`. Currently, tests are run for
- Course, topic, and skill existance and formatting

Before finalizing any changes, make sure to rune `npm run dev`, and open the localhost web page and check the console for any errors.

## Project Structure and Navigation Guide

This project combines a React/TypeScript frontend with a Rust backend using Tauri. Understanding the layout is key to effective development.

### Key Directories and Files:

*   **`/` (Project Root):**
    *   `package.json`: Defines Node.js dependencies, scripts (e.g., `npm run dev`, `npm run build`, `npm run tauri dev`).
    *   `vite.config.ts`: Configuration for Vite, the frontend build tool.
    *   `tsconfig.json`: Main TypeScript configuration for the frontend application.
    *   `tsconfig.node.json`: TypeScript configuration for Node.js-specific files (like `vite.config.ts`).
    *   `.gitignore`: Specifies intentionally untracked files that Git should ignore.
    *   `AGENTS.md`: This file. Provides guidance for AI agents working on this codebase.
    *   `docs/design_doc.md`: The **primary design specification**. All changes should align with this document.

*   **`/src/` (Frontend Source):**
    *   Contains all React components, TypeScript logic, CSS/styling, and frontend assets managed by Vite.
    *   `main.tsx`: The entry point for the React application.
    *   `App.tsx`: The main application component.
    *   Likely subdirectories for components, pages/views, state management (e.g., Redux slices), utility functions, etc. will be created here as the application develops.

*   **`/src-tauri/` (Backend Source & Tauri Configuration):**
    *   `Cargo.toml`: The Rust package manifest. Defines Rust dependencies (crates) and project metadata.
    *   `build.rs`: Optional Rust build script.
    *   `tauri.conf.json`: **Crucial Tauri configuration file.** Defines application identifier, window settings, plugin configurations, frontend asset paths (`frontendDist`, `devUrl`), build commands, security settings (CSP), etc.
    *   `/src-tauri/src/`: Contains the Rust source code for the backend.
        *   `main.rs`: The entry point for the Rust application. This is where you'll define Tauri commands, event handlers, and setup logic.
    *   `/src-tauri/icons/`: Application icons for different platforms.

*   **`/public/`:**
    *   Static assets that are served directly by Vite during development and copied to the `dist` directory during build without processing. Often contains `index.html` (though it can also be in the root) and other static files like favicons.

*   **`/dist/` (Build Output - Frontend):**
    *   This directory is generated by `npm run build` (which runs Vite). It contains the optimized static assets for the frontend (HTML, CSS, JavaScript bundles).
    *   `tauri.conf.json` points to this directory (`frontendDist`) for Tauri to package.

*   **`/src-tauri/target/` (Build Output - Backend):**
    *   This directory is generated by `cargo build` (run implicitly by `tauri dev` or `tauri build`). It contains the compiled Rust executables and intermediate build files.
    *   Ignored by Git.

*   **`/node_modules/`:**
    *   Contains all Node.js dependencies. Managed by `npm`.
    *   Ignored by Git.

*   **Application Content & Data (as per `design_doc.md` - these will be created/populated as part of app development):**
    *   `/courses.json`: Global list of installed courses.
    *   `/course/<course_id>/`: Directory for each course.
        *   `catalog.json`: Course metadata.
        *   `topics/`: Topic definition files.
        *   `as_md/`: Markdown content for Atomic Skills.
        *   `as_questions/`: YAML question pools for Atomic Skills.
    *   `/save/`: User-specific save data (mastery, attempts, XP, preferences).
    *   `/.cache/`: Optional cache files (e.g., SQLite index).
    *   `/schema/`: JSON schema definitions for various data files.
    *   `/logs/`: Application logs.
    *   `/media/`: Images and other media for course content.
    *   `/i18n/`: Internationalization files.

### Navigating the Codebase:

1.  **Start with `docs/design_doc.md`:** This is the source of truth for application logic, data formats, and overall architecture.
2.  **Frontend (UI & Client-Side Logic):**
    *   Begin in `/src/main.tsx` and `/src/App.tsx`.
    *   Component structure will evolve within `/src/`.
    *   For UI-related changes or frontend features, this is your primary area.
    *   State management (e.g., Redux) will also reside here.
3.  **Backend (Core Logic, System Interaction, Tauri Commands):**
    *   Focus on `/src-tauri/src/main.rs`. This is where Rust functions exposed to the frontend (Tauri commands) are defined.
    *   Consult `/src-tauri/Cargo.toml` for backend dependencies (Rust crates).
4.  **Application Configuration (Window, Build, Plugins):**
    *   Review and modify `/src-tauri/tauri.conf.json`.
5.  **Build System & Dependencies:**
    *   Frontend: `package.json` (npm scripts, JS dependencies), `vite.config.ts` (Vite).
    *   Backend: `/src-tauri/Cargo.toml` (Rust crates).
6.  **Running the Application:**
    *   Development: `npm run tauri dev`
    *   Build: `npm run tauri build`

By understanding these key areas, you can more effectively locate relevant code, understand data flow, and make changes consistent with the project's design.
